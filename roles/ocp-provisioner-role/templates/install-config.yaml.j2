apiVersion: v1
baseDomain: {{ install_config.base_domain }}
metadata:
  name: {{ install_config.cluster_name }}
networking:
  machineNetwork:
  - cidr: {{ install_config.machine_network_cidr }}
  networkType: OVNKubernetes
compute:
- name: worker
  replicas: 2
controlPlane:
  name: master
  replicas: 3
  platform:
    baremetal: {}
platform:
  baremetal:
    apiVIP: {{ install_config.api_vip }}
    ingressVIP: {{ install_config.ingress_vip }}
    bootstrapExternalStaticIP: {{ install_config.bootstrap_ip }}
    bootstrapExternalStaticGateway: {{ install_config.bootstrap_gateway }}
    hosts:
      - name: openshift-master-0
        role: master
        bmc:
          address: ipmi://<out_of_band_ip_1>
          username: <user>
          password: <password>
        bootMACAddress: <NIC1_mac_address_1>
        rootDeviceHints:
         deviceName: "/dev/sda"
      - name: openshift-master-1
        role: master
        bmc:
          address: ipmi://<out_of_band_ip_2>
          username: <user>
          password: <password>
        bootMACAddress: <NIC1_mac_address_2>
        rootDeviceHints:
         deviceName: "/dev/sda"
      - name: openshift-master-2
        role: master
        bmc:
          address: ipmi://<out_of_band_ip_3>
          username: <user>
          password: <password>
        bootMACAddress: <NIC1_mac_address_3>
        rootDeviceHints:
         deviceName: "/dev/sda"
      - name: openshift-worker-0
        role: worker
        bmc:
          address: ipmi://<out_of_band_ip_4>
          username: <user>
          password: <password>
        bootMACAddress: <NIC1_mac_address_4>
      - name: openshift-worker-1
        role: worker
        bmc:
          address: ipmi://<out_of_band_ip_5>
          username: <user>
          password: <password>
        bootMACAddress: <NIC1_mac_address_5>
        rootDeviceHints:
         deviceName: "/dev/sda"
pullSecret: '{{ pull_secret }}'
sshKey: '{{ kni_pub_key['content'] | b64decode | trim }}'
